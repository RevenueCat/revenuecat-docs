---
title: "AppsFlyer"
slug: "appsflyer"
excerpt: "Integrate Purchases SDK with AppsFlyer"
hidden: false
createdAt: "2018-12-13T18:49:41.608Z"
updatedAt: "2018-12-17T21:11:58.277Z"
---
With our AppsFlyer integration you can:
* Accurately track subscriptions generated from AppsFlyer campaigns, allowing you to know precisely how much revenue your campaigns generate.
* Send trial conversions and renewals directly from RevenueCat to AppsFlyer, allowing for tracking without an app open.
* Continue to follow your cohorts for months to know the long tail revenue generated by your campaigns.

[block:callout]
{
  "type": "success",
  "body": "This section assumes you've followed our [Quickstart](doc:getting-started-1) section of our Getting Started guide to install and configure our SDK."
}
[/block]

[block:api-header]
{
  "title": "Send purchase data to AppsFlyer"
}
[/block]
When you receive the `adjustAttributionChanged` callback you can use the `addAttributionData` method for passing the attribution data dictionary:

### Attaching attribution data to a user
[block:code]
{
  "codes": [
    {
      "code": "import AppsFlyerLib\n\nextension AppDelegate: AppsFlyerTrackerDelegate {\n    func onConversionDataReceived(_ installData: [AnyHashable : Any]!) {\n        \n        if var data = installData {\n            data[\"rc_appsflyer_id\"] = AppsFlyerTracker.shared().getAppsFlyerUID()\n            \n            purchases?.addAttributionData(data, from: .appsFlyer)\n        }\n    }\n}",
      "language": "swift",
      "name": "Swift"
    },
    {
      "code": "#import <AppsFlyerTracker/AppsFlyerTracker.h>\n\n@interface AppDelegate : UIResponder <UIApplicationDelegate, AppsFlyerTrackerDelegate>\n\n- (void)onConversionDataReceived:(NSDictionary *)installData {\n  NSMutableData *data = [NSMutableDictionary dictionaryWithDictionary:installData];\n  \n  data[@\"rc_appsflyer_id\"] = [[AppsFlyerTracker sharedTracker] getAppsFlyerUID];\n  \n  [self.purchases addAttributionData:data fromNetwork:RCAttributionSourceAppsFlyer];\n}\n\n@end",
      "language": "objectivec",
      "name": "Objective-C"
    },
    {
      "code": "@Override\npublic void onInstallConversionDataLoaded(Map<String, String> conversionData) {\n  String appsFlyerId = AppsFlyerLib.getInstance().getAppsFlyerUID(this);\n  conversionData.put(\"rc_appsflyer_id\", appsFlyerId);\n  purchases.addAttributionData(conversionData, Purchases.AttributionNetwork.APPSFLYER);\n}",
      "language": "java"
    },
    {
      "code": "// Psuedo Example\nlet attributionData = await Attribution.getConversionData();\nPurchases.addAttributionData(data, Purchases.ATTRIBUTION_NETWORKS.APPSFLYER);",
      "language": "javascript",
      "name": "ReactNative"
    },
    {
      "code": "void SendAttribution()\n{\n  Purchases purchases = GetComponent<Purchases>();\n  Purchases.AdjustData data = new Purchases.AdjustData();\n\n  data.adid = \"test\";\n  data.network = \"network\";\n  data.adgroup = \"adgroup\";\n  data.campaign = \"campaign\";\n  data.creative = \"creative\";\n  data.clickLabel = \"clickLabel\";\n  data.trackerName = \"trackerName\";\n  data.trackerToken = \"trackerToken\";\n\n  purchases.AddAdjustAttributionData(data);\n}",
      "language": "csharp",
      "name": "Unity"
    }
  ]
}
[/block]
#### Advertising Identifiers
In order for AppsFlyer to forward revenue information to 3rd party partners, you need the iOS IDFA or Google Play AdId. To forward this to RevenueCat, add the `rc_idfa` or `rc_gps_adid` key to the attribution params *before* calling the `addAttributionData` method: 
[block:code]
{
  "codes": [
    {
      "code": "import AppsFlyerLib\nimport AdSupport\n\nextension AppDelegate: AppsFlyerTrackerDelegate {\n    func onConversionDataReceived(_ installData: [AnyHashable : Any]!) {\n        \n        if var data = installData {\n            let idfa = ASIdentifierManager.shared().advertisingIdentifier.uuidString\n            data[\"rc_idfa\"] = idfa\n            data[\"rc_appsflyer_id\"] = AppsFlyerTracker.shared().getAppsFlyerUID()\n            \n            purchases?.addAttributionData(data, from: .appsFlyer)\n        }\n    }\n}",
      "language": "swift"
    },
    {
      "code": "#import <AppsFlyerTracker/AppsFlyerTracker.h>\n#import <AdSupport/ASIdentifierManager.h>\n\n@interface AppDelegate : UIResponder <UIApplicationDelegate, AppsFlyerTrackerDelegate>\n  \n- (void)onConversionDataReceived:(NSDictionary *)installData {\n  NSDictionary *attributionData = [NSMutableDictionary dictionaryWithDictionary:installData];\n  NSString *idfa = ASIdentifierManager.sharedManager.advertisingIdentifier.UUIDString;\n  if (idfa) {\n    NSMutableDictionary *newData = [NSMutableDictionary dictionaryWithDictionary:attributionData];\n    newData[@\"rc_idfa\"] = idfa;\n    attributionData = [NSDictionary dictionaryWithDictionary:newData];\n  }\n  attributionData[@\"rc_appsflyer_id\"] = [[AppsFlyerTracker sharedTracker] getAppsFlyerUID];\n  [self.purchases addAttributionData:attributionData\n                         fromNetwork:RCAttributionNetworkAppsFlyer];\n}",
      "language": "objectivec"
    },
    {
      "code": "import com.google.android.gms.ads.identifier.AdvertisingIdClient;\nimport com.google.android.gms.ads.identifier.AdvertisingIdClient.Info;\n\n@Override\npublic void onInstallConversionDataLoaded(Map<String, String> conversionData) {\n  \n  Info adInfo = null;\n  try {\n    adInfo = AdvertisingIdClient.getAdvertisingIdInfo(context);\n\n  } catch (IOException e) {\n    // Unrecoverable error connecting to Google Play services (e.g.,\n    // the old version of the service doesn't support getting AdvertisingId).\n\n  } catch (GooglePlayServicesAvailabilityException e) {\n    // Encountered a recoverable error connecting to Google Play services. \n\n  } catch (GooglePlayServicesNotAvailableException e) {\n    // Google Play services is not available entirely.\n  }\n  conversionData.put(\"rc_gps_adid\", adInfo.getId());\n  \n  String appsFlyerId = AppsFlyerLib.getInstance().getAppsFlyerUID(this);\n  conversionData.put(\"rc_appsflyer_id\", appsFlyerId);\n  \n  purchases.addAttributionData(conversionData, Purchases.AttributionNetwork.APPSFLYER);\n}",
      "language": "java"
    }
  ]
}
[/block]