---
title: Tenjin
slug: tenjin
excerpt: Integrate Purchases SDK with Tenjin for precise revenue tracking
hidden: false
metadata:
  title: Tenjin In-App Purchase Integration â€“ RevenueCat
  description: With our Tenjin integration, you can accurately track subscriptions
    generated from Tenjin campaigns, allowing you to know precisely how much revenue
    your campaigns generate.
  image:
    0: https://files.readme.io/1564c4f-RevenueCat_Docs_OG.png
    1: RevenueCat Docs OG.png
    2: 1200
    3: 627
    4: "#f7f5f5"
createdAt: '2022-08-19T01:43:02.392Z'
updatedAt: '2022-08-19T01:43:02.392Z'
category: 640a7bf1c7bae2004235517b
---
With our Tenjin integration you can:
* Accurately track subscriptions generated from Tenjin campaigns, allowing you to know precisely how much revenue your campaigns generate.
* Send trial conversions and renewals directly from RevenueCat to Tenjin, allowing for tracking without an app open.
* Continue to follow your cohorts for months to know the long tail revenue generated by your campaigns.

# 1. Send device data to RevenueCat

The Tenjin integration requires some device-specific data. RevenueCat will only send events into Tenjin if the below [Subscriber Attributes](doc:subscriber-attributes) keys have been set for the device.
[block:parameters]
{
  "data": {
    "h-0": "Key",
    "h-1": "Description",
    "h-2": "Required",
    "0-0": "`$idfa`",
    "2-0": "`$idfv`",
    "3-0": "`$androidId`",
    "0-2": "âœ… (iOS only)",
    "2-2": "âŒ (optional)",
    "3-2": "âŒ (optional)",
    "4-2": "âŒ (optional)",
    "4-0": "`$ip`",
    "0-1": "iOS [advertising identifier](https://developer.apple.com/documentation/adsupport/asidentifiermanager/1614151-advertisingidentifier) UUID",
    "2-1": "iOS [vender identifier](https://developer.apple.com/documentation/uikit/uidevice/1620059-identifierforvendor) UUID",
    "4-1": "The IP address of the device",
    "3-1": "Android [device identifier](https://developer.android.com/reference/android/provider/Settings.Secure#ANDROID_ID)",
    "1-0": "`$gpsAdId`",
    "1-1": "Google [advertising identifier](https://developers.google.com/android/reference/com/google/android/gms/ads/identifier/AdvertisingIdClient.Info)",
    "1-2": "âœ… (Android only)"
  },
  "cols": 3,
  "rows": 5
}
[/block]
These properties can be set manually, like any other [Subscriber Attributes](doc:subscriber-attributes), or through the helper method `collectDeviceIdentifiers()`. 
[block:file]
swift->code_blocks/ðŸ”Œ Integrations/attribution/tenjin_1.swift
kotlin->code_blocks/ðŸ”Œ Integrations/attribution/tenjin_1.kt
[/block]
You should make sure to call `collectDeviceIdentifiers()` after the *Purchases SDK* is configured, and before the first purchase occurs. It's safe to call this multiple times, as only the new/updated values will be sent to RevenueCat.

[block:callout]
{
  "type": "danger",
  "title": "Device identifiers with iOS App Tracking Transparency (iOS 14.5+)",
  "body": "If you are requesting the App Tracking permission through ATT to access the IDFA, you can call `.collectDeviceIdentifiers()` *again* if the customer accepts the permission to update the `$idfa` attribute in RevenueCat."
}
[/block]

[block:callout]
{
  "type": "info",
  "title": "Import AdSupport Framework (iOS)",
  "body": "The AdSupport framework is required to access the IDFA parameter on iOS. Don't forget to import this into your project."
}
[/block]

[block:image]
{
  "images": [
    {
      "image": [
        "https://files.readme.io/caf9cda-Screen_Shot_2020-09-14_at_7.09.36_PM.png",
        "Screen Shot 2020-09-14 at 7.09.36 PM.png",
        649,
        155,
        "#2b292b"
      ]
    }
  ]
}
[/block]
## (Optional) Send campaign data to RevenueCat
RevenueCat itself is not an attribution network, and can't determine which specific ad drove an install/conversion. However, if you're able to collect this information from another source, such as Tenjin, it's possible to attach it to a user in RevenueCat using [Subscriber Attributes](doc:subscriber-attributes)  as well.
The below reserved key names can be used to optionally attach campaign data to a user. This data will then be sent through to other downstream analytics integrations and accessible via APIs and webhooks.
[block:parameters]
{
  "data": {
    "h-0": "Key",
    "0-0": "`$mediaSource`",
    "1-0": "`$campaign`",
    "2-0": "`$adGroup`",
    "3-0": "`$ad`",
    "4-0": "`$keyword`",
    "5-0": "`$creative`"
  },
  "cols": 1,
  "rows": 6
}
[/block]

[block:callout]
{
  "type": "danger",
  "body": "Make sure to remove all client side tracking of revenue. Since RevenueCat will be sending events for all revenue actions, tracking purchases with the Tenjin SDK directly can lead to double counting of revenue in Tenjin.",
  "title": "Remove SDK Purchase Tracking"
}
[/block]
# 2. Send RevenueCat events into Tenjin

After you've set up the *Purchases SDK* to send attribution data from Tenjin to RevenueCat, you can "turn on" the integration and configure the event names from the RevenueCat dashboard.

1. Navigate to your project in the RevenueCat dashboard and find the *Integrations* card in the left menu. Select **+ New** 
[block:image]
{
  "images": [
    {
      "image": [
        "https://files.readme.io/94eb5b6-Screen_Shot_2021-12-01_at_12.23.10_PM.png",
        "Screen Shot 2021-12-01 at 12.23.10 PM.png",
        332,
        410,
        "#f5f6f5"
      ]
    }
  ]
}
[/block]
2. Choose **Tenjin** from the integrations menu
3. Add your Tenjin developer API key
4. Select whether you want sales reported as gross revenue (before app store commission), or after store commission and/or estimated taxes.
[block:image]
{
  "images": [
    {
      "image": [
        "https://files.readme.io/e9fc074-Tenjin.png",
        "Tenjin.png",
        1866,
        708,
        "#fcfcfc"
      ],
      "caption": "Tenjin configuration screen"
    }
  ]
}
[/block]

[block:callout]
{
  "type": "info",
  "title": "About revenue discrepancies",
  "body": "RevenueCat must have the IDFA or ADID of the user at the time an event occurs in order to send it to Tenjin. This can result in drastically lower revenue metrics in Tenjin vs. RevenueCat since some users opt-out of ad tracking or don't have IDFA/ADID, which means some of your total revenue won't be tracked by Tenjin. Don't be alarmed! If events are being sent successfully in testing and for some of your users in production, then the integration is working as intended to pair subscription revenue with campaign performance."
}
[/block]

[block:callout]
{
  "type": "success",
  "title": "You've done it!",
  "body": "You should start seeing events from RevenueCat appear in Tenjin. Woohoo!"
}
[/block]