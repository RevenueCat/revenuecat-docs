---
title: "App User IDs and Aliases"
slug: "user-ids"
excerpt: "How RevenueCat Handles User Identity"
hidden: false
createdAt: "2018-06-11T23:32:40.260Z"
updatedAt: "2018-11-29T23:48:23.173Z"
---
RevenueCat provides a source of truth for a subscriber's status across different platforms. To do this, each subscriber has an App User ID that uniquely identifies them within your application. 
[block:api-header]
{
  "title": "Random App User ID"
}
[/block]
If you don't provide an App User ID when instantiating the Purchases SDK, RevenueCat will create a new random App User ID for you and cache it on the device. 

In the event that the user deletes and reinstalls the app, this random App User ID will be unrecoverable and a new random App User ID will be generated. Restoring in-app purchases will recover any subscriptions and *alias* the new and old random App User IDs together. 
[block:api-header]
{
  "title": "Provided App User ID"
}
[/block]
If you have your own App User IDs, you can pass those on instantiation to Purchases. This will allow you to reference users in the RevenueCat dashboard, via the API, as well as in the webhooks using your own App User IDs.

Using an externally managed App User ID also provides a mechanism by which to restore purchases. When a user deletes and reinstalls your app, using the same App User ID will ensure they still haves access to subscriptions previously started.
[block:callout]
{
  "type": "warning",
  "title": "App User IDs Should Not Be Guessable",
  "body": "RevenueCat provides subscription status via the public API, having App User IDs that are easily guessed is not good. It is recommended to use a non-guessable psuedo-random ID that isn't made public inside your app.\n\nFor App User IDs generated by RevenueCat, we use a UUID."
}
[/block]

[block:api-header]
{
  "title": "Aliases"
}
[/block]
Aliases are a way for RevenueCat to attach multiple App User IDs to a single subscriber. This is useful when a user has multiple devices and you are relying on random App User IDs. For example:
[block:image]
{
  "images": [
    {
      "image": [
        "https://files.readme.io/f94f00d-aliases.png",
        "aliases.png",
        1477,
        673,
        "#fcfcfc"
      ],
      "caption": "Alias 1 and 2 both reference the same subscriber and the same subscriptions."
    }
  ]
}
[/block]
There are two ways that aliases are created:

1. Restoring purchases
2. Calling `createAlias`
[block:api-header]
{
  "title": "Restoring Purchases"
}
[/block]
Restoring purchases is a mechanism by which your user can *restore* their in-app purchases, reactivating any content they had previously purchased.

If two different App User IDs try to restore transactions from the same underlying store account (Apple or Google) RevenueCat will create an alias between the two App User IDs and count them as the same user going forward. 

This is a common if your app does not have accounts and is relying on RevenueCat's random App User IDs. 
[block:callout]
{
  "type": "info",
  "title": "Allow Sharing App or Play Store Accounts",
  "body": "Calling `restoreTransactions` on the Purchases SDK will always alias App User IDs if needed, however, in some cases you may also want to allow new purchases to perform an alias action. \n\nBy default, RevenueCat will not let you reuse an App or Play Store account that already has an active subscription. If you set `allowSharingAppStoreAccount = True` the SDK will be permissive in accepting shared accounts, creating aliases as needed. \n\nBy default `allowSharingAppStoreAccount` is `True` for RevenueCat random App User IDs but must be enabled manually if you want to allow permissive sharing for your own App User IDs."
}
[/block]

[block:api-header]
{
  "title": "Manually Creating Aliases"
}
[/block]
Sometimes, it is useful to manually create an alias. This is most often used when an app allows users to purchase before logging in.

To do this, you can call the method `createAlias(string newAlias)` on Purchases. This will create a new alias in addition to the current App User ID. For example:

1. User opens the app, Purchases is instantiated without an App User ID generating a random App User ID
2. User purchases a subscription, attaching the subscription to the random ID
3. User creates an account
4. Developer calls `createAlias(newAppUserID)`

Now the subscriber can be referenced in the Purchases SDK or the REST API by using the developer specified App User ID.
[block:api-header]
{
  "title": "Logging In"
}
[/block]
When a user logs in, you will want to change the App User ID. This is achieved by calling `identify(string newAppUserID)`.

Once logged in, calling `restoreTransactions` will alias the logged in user to any other App User IDs sharing that App or Play Store account. 
[block:api-header]
{
  "title": "Logging Out"
}
[/block]
When a user logs out, call the `reset()` method on Purchases and new random App User ID will be generated, creating a new anonymous user for the logged out state.

[block:callout]
{
  "type": "warning",
  "title": "This will reset the account sharing preference",
  "body": "Calling `reset()` will set `allowSharingStoreAccount` to `True`, be sure to set this back if needed."
}
[/block]