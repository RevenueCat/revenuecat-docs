---
title: "Tenjin"
slug: "tenjin"
excerpt: "Integrate Purchases SDK with Tenjin"
hidden: false
createdAt: "2019-02-13T01:57:35.018Z"
updatedAt: "2019-04-19T22:19:05.551Z"
---
With our Tenjin integration you can:
* Accurately track subscriptions generated from Tenjin campaigns, allowing you to know precisely how much revenue your campaigns generate.
* Send trial conversions and renewals directly from RevenueCat to Tenjin, allowing for tracking without an app open.
* Continue to follow your cohorts for months to know the long tail revenue generated by your campaigns.

[block:api-header]
{
  "title": "1. Send attribution data to RevenueCat"
}
[/block]
After you configure the Tenjin SDK, you can use the `addAttributionData` method for passing the attribution data dictionary. You need the iOS IDFA or Google Play AdId to attach the attribution information to the correct user. To forward this to RevenueCat, add the `rc_idfa` or `rc_gps_adid` key to the attribution params *before* calling the `addAttributionData` method: 


[block:code]
{
  "codes": [
    {
      "code": "import AdSupport\n\n// Tenjin SDK Configuration\n// ...\n// ...\n\n// send the idfa and idfv details to Tenjin after configuring Purchases instance\nvar data = [\"rc_idfa\" : ASIdentifierManager.shared().advertisingIdentifier.uuidString]\nif let idfv = UIDevice().identifierForVendor?.uuidString {\n    data[\"rc_idfv\"] = idfv\n}\nPurchases.shared.addAttributionData(data, from: .tenjin)",
      "language": "swift",
      "name": "Swift"
    },
    {
      "code": "#import <AdSupport/ASIdentifierManager.h>\n\n// Tenjin SDK Configuration\n// ...\n// ...\n\nNSMutableDictionary *attributionData = [NSMutableDictionary dictionary];\nNSString *idfa = ASIdentifierManager.sharedManager.advertisingIdentifier.UUIDString;\n  if (idfa) {\n    NSMutableDictionary *newData = [NSMutableDictionary dictionaryWithDictionary:attributionData];\n    newData[@\"rc_idfa\"] = idfa;\n    attributionData = [NSDictionary dictionaryWithDictionary:newData];\n  }\n[[RCPurchases shared] addAttributionData:attributionData\n                         fromNetwork:RCAttributionNetworkTenjin];",
      "language": "objectivec",
      "name": "Objective-C"
    },
    {
      "code": "// Tenjin SDK Configuration\n// ...\n// ...\n\nInfo adInfo = null;\ntry {\n  adInfo = AdvertisingIdClient.getAdvertisingIdInfo(context);\n\n} catch (IOException e) {\n  // Unrecoverable error connecting to Google Play services (e.g.,\n  // the old version of the service doesn't support getting AdvertisingId).\n\n} catch (GooglePlayServicesAvailabilityException e) {\n  // Encountered a recoverable error connecting to Google Play services. \n\n} catch (GooglePlayServicesNotAvailableException e) {\n  // Google Play services is not available entirely.\n}\nconversionData.put(\"rc_gps_adid\", adInfo.getId());\n\nPurchases.getSharedInstance().addAttributionData(conversionData, Purchases.AttributionNetwork.TENJIN);",
      "language": "java"
    }
  ]
}
[/block]

[block:callout]
{
  "type": "danger",
  "body": "Make sure to remove all client side tracking of revenue. Since RevenueCat will be sending events for all revenue actions, tracking purchases with the Tenjin SDK directly can lead to double counting of revenue in Tenjin.",
  "title": "Remove SDK Purchase Tracking"
}
[/block]

[block:api-header]
{
  "title": "2. Send RevenueCat events into Tenjin"
}
[/block]
After you've set up the *Purchase* SDK to send attribution data from Tenjin to RevenueCat, you can "turn on" the integration and configure the event names from the RevenueCat dashboard.

1. Navigate to your app in the RevenueCat dashboard and choose 'Tenjin' from the integrations menu
2. Add your Tenjin developer API key
3. Select whether you want RevenueCat to report proceeds (after app store cut) or revenue (gross sales)
[block:image]
{
  "images": [
    {
      "image": [
        "https://files.readme.io/c695121-tenjin.png",
        "tenjin.png",
        1415,
        733,
        "#f7f7f7"
      ],
      "caption": "Tenjin configuration screen"
    }
  ]
}
[/block]